<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Standoff Boost</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

        :root {
            --bg-color: #0f0f11;
            --card-bg: #18181b;
            --text-color: #ffffff;
            --accent-color: #3b82f6; /* –°–∏–Ω–∏–π –∫–∞–∫ –≤ —Å—Ç–∞–Ω–¥–æ—Ñ—Ñ */
            --secondary-text: #a1a1aa;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            overflow-x: hidden;
            /* –õ–µ–≥–∫–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –Ω–∞ —Ñ–æ–Ω–µ */
            background-image: radial-gradient(circle at 50% 0%, #1e3a8a 0%, #0f0f11 60%);
            background-attachment: fixed;
        }

        h1, h2, h3 { margin: 0; text-transform: uppercase; letter-spacing: 1px; }
        
        /* –ó–ê–ì–û–õ–û–í–û–ö */
        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }
        .header h1 {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .header p { color: var(--secondary-text); font-size: 14px; margin-top: 5px; }

        /* –ö–ê–†–¢–û–ß–ö–ò –†–ï–ñ–ò–ú–û–í */
        .mode-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .mode-card {
            background: var(--card-bg);
            border: 1px solid #27272a;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .mode-card:active { transform: scale(0.98); border-color: var(--accent-color); }
        .mode-card h3 { font-size: 18px; margin-bottom: 5px; }
        .mode-card p { font-size: 12px; color: var(--secondary-text); }
        
        /* –°–ï–¢–ö–ê –ó–í–ê–ù–ò–ô */
        .ranks-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            animation: slideUp 0.3s ease;
        }

        .rank-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid transparent;
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
        }
        
        .rank-card.selected {
            border-color: var(--accent-color);
            background: rgba(59, 130, 246, 0.1);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
        }

        .rank-card img {
            width: 100%;
            height: auto;
            max-height: 60px;
            object-fit: contain;
            margin-bottom: 5px;
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.5));
        }

        .rank-card span {
            display: block;
            font-size: 10px;
            font-weight: 700;
            color: var(--secondary-text);
        }

        /* –ò–ù–§–û –ë–õ–û–ö */
        .info-box {
            background: #1e1e24;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .info-box span { font-size: 12px; color: #ccc; }
        .info-box b { color: #fff; font-size: 14px; }

        .hidden { display: none; }
        
        /* –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î */
        .back-btn {
            background: transparent;
            border: 1px solid #333;
            color: #777;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 15px;
            cursor: pointer;
            display: inline-block;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

    <div class="container">
        
        <div id="step-mode">
            <div class="header">
                <h1>BOOST SERVICE</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏–≥—Ä—ã –¥–ª—è –±—É—Å—Ç–∞</p>
            </div>
            
            <div class="mode-grid">
                <div class="mode-card" onclick="selectMode('–î—É—ç–ª–∏')">
                    <h3>‚öîÔ∏è –î—É—ç–ª–∏</h3>
                    <p>–ë—É—Å—Ç —Ä–∞–Ω–≥–∞ 1 –Ω–∞ 1</p>
                </div>
                <div class="mode-card" onclick="selectMode('–°–æ—é–∑–Ω–∏–∫–∏')">
                    <h3>ü§ù –°–æ—é–∑–Ω–∏–∫–∏</h3>
                    <p>–ë—É—Å—Ç —Ä–∞–Ω–≥–∞ 2 –Ω–∞ 2</p>
                </div>
                <div class="mode-card" onclick="selectMode('–°–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π')">
                    <h3>üèÜ –°–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π</h3>
                    <p>–ë—É—Å—Ç —Ä–∞–Ω–≥–∞ 5 –Ω–∞ 5 (–ú–ú)</p>
                </div>
            </div>
        </div>

        <div id="step-current" class="hidden">
            <div onclick="goBack()" class="back-btn">‚Üê –ù–∞–∑–∞–¥</div>
            <div class="header">
                <h3>–í–ê–®–ï –ó–í–ê–ù–ò–ï?</h3>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ, –∫–∞–∫–æ–µ —É –≤–∞—Å —Å–µ–π—á–∞—Å –∑–≤–∞–Ω–∏–µ</p>
            </div>
            <div class="ranks-grid" id="current-ranks-list"></div>
        </div>

        <div id="step-target" class="hidden">
            <div onclick="resetToCurrent()" class="back-btn">‚Üê –ù–∞–∑–∞–¥</div>
            
            <div class="info-box">
                <div>
                    <span>–°–µ–π—á–∞—Å:</span> <b id="display-current-rank">...</b>
                </div>
                <div>
                    <span>–†–µ–∂–∏–º:</span> <b id="display-mode">...</b>
                </div>
            </div>

            <div class="header">
                <h3>–ñ–ï–õ–ê–ï–ú–û–ï –ó–í–ê–ù–ò–ï?</h3>
                <p>–î–æ –∫–∞–∫–æ–≥–æ —Ä–∞–Ω–≥–∞ –±—É—Å—Ç–∏–º?</p>
            </div>
            <div class="ranks-grid" id="target-ranks-list"></div>
        </div>

    </div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // –ö–û–ù–§–ò–ì –ó–í–ê–ù–ò–ô (–ö–∞—Ä—Ç–∏–Ω–∫–∏ –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å –≤ –ø–∞–ø–∫–µ img/)
    const RANKS = [
        {id: 1, name: "Bronze I", file: "bronze1.png"},
        {id: 2, name: "Bronze II", file: "bronze2.png"},
        {id: 3, name: "Bronze III", file: "bronze3.png"},
        {id: 4, name: "Bronze IV", file: "bronze4.png"},
        {id: 5, name: "Silver I", file: "silver1.png"},
        {id: 6, name: "Silver II", file: "silver2.png"},
        {id: 7, name: "Silver III", file: "silver3.png"},
        {id: 8, name: "Silver IV", file: "silver4.png"},
        {id: 9, name: "Gold I", file: "gold1.png"},
        {id: 10, name: "Gold II", file: "gold2.png"},
        {id: 11, name: "Gold III", file: "gold3.png"},
        {id: 12, name: "Gold IV", file: "gold4.png"},
        {id: 13, name: "Phoenix", file: "phoenix.png"},
        {id: 14, name: "Ranger", file: "ranger.png"},
        {id: 15, name: "Champion", file: "champion.png"},
        {id: 16, name: "Master", file: "master.png"},
        {id: 17, name: "Elite", file: "elite.png"},
        {id: 18, name: "The Legend", file: "legend.png"}
    ];

    // –¶–ï–ù–ê –ó–ê 1 –®–ê–ì (–ù–∞–ø—Ä–∏–º–µ—Ä, —Å –°–∏–ª—å–≤–µ—Ä 1 –¥–æ –°–∏–ª—å–≤–µ—Ä 2 = 50—Ä)
    const PRICE_PER_STEP = 50; 

    let order = {
        mode: null,
        currentRankId: null,
        currentRankName: null,
        targetRankId: null,
        targetRankName: null,
        price: 0
    };

    // 1. –í–´–ë–û–† –†–ï–ñ–ò–ú–ê
    function selectMode(modeName) {
        if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
        order.mode = modeName;
        
        document.getElementById('step-mode').classList.add('hidden');
        document.getElementById('step-current').classList.remove('hidden');
        
        renderRanks('current');
    }

    // 2. –†–ï–ù–î–ï–† –ö–ê–†–¢–û–ß–ï–ö –ó–í–ê–ù–ò–ô
    function renderRanks(type) {
        const containerId = type === 'current' ? 'current-ranks-list' : 'target-ranks-list';
        const container = document.getElementById(containerId);
        container.innerHTML = '';

        RANKS.forEach(rank => {
            // –ï—Å–ª–∏ –≤—ã–±–∏—Ä–∞–µ–º –¶–ï–õ–¨, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–≤–∞–Ω–∏—è –Ω–∏–∂–µ –∏–ª–∏ —Ä–∞–≤–Ω—ã–µ —Ç–µ–∫—É—â–µ–º—É
            if (type === 'target' && rank.id <= order.currentRankId) return;

            const div = document.createElement('div');
            div.className = 'rank-card';
            div.onclick = () => handleRankClick(type, rank, div);
            
            div.innerHTML = `
                <img src="img/${rank.file}" alt="${rank.name}">
                <span>${rank.name}</span>
            `;
            container.appendChild(div);
        });
    }

    // 3. –û–ë–†–ê–ë–û–¢–ö–ê –ö–õ–ò–ö–ê –ü–û –ó–í–ê–ù–ò–Æ
    function handleRankClick(type, rank, element) {
        if(tg.HapticFeedback) tg.HapticFeedback.selectionChanged();

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ
        document.querySelectorAll(`#${type}-ranks-list .rank-card`).forEach(el => el.classList.remove('selected'));
        element.classList.add('selected');

        if (type === 'current') {
            order.currentRankId = rank.id;
            order.currentRankName = rank.name;

            // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
            setTimeout(() => {
                document.getElementById('step-current').classList.add('hidden');
                document.getElementById('step-target').classList.remove('hidden');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ-–ø–ª–∞—à–∫—É
                document.getElementById('display-current-rank').innerText = rank.name;
                document.getElementById('display-mode').innerText = order.mode;

                renderRanks('target');
            }, 200);

        } else {
            order.targetRankId = rank.id;
            order.targetRankName = rank.name;
            calculatePrice();
        }
    }

    // 4. –†–ê–°–ß–ï–¢ –¶–ï–ù–´
    function calculatePrice() {
        const steps = order.targetRankId - order.currentRankId;
        order.price = steps * PRICE_PER_STEP;

        if (order.price > 0) {
            tg.MainButton.text = `–ó–ê–ö–ê–ó–ê–¢–¨ –ó–ê ${order.price}‚ÇΩ`;
            tg.MainButton.color = "#3b82f6"; // –°–∏–Ω–∏–π —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏
            tg.MainButton.textColor = "#ffffff";
            tg.MainButton.show();
        }
    }

    // 5. –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• –ë–û–¢–£
    tg.MainButton.onClick(() => {
        const data = JSON.stringify(order);
        tg.sendData(data);
    });

    // –ù–ê–í–ò–ì–ê–¶–ò–Ø (–ö–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥")
    window.goBack = function() {
        document.getElementById('step-current').classList.add('hidden');
        document.getElementById('step-mode').classList.remove('hidden');
        tg.MainButton.hide();
    }

    window.resetToCurrent = function() {
        document.getElementById('step-target').classList.add('hidden');
        document.getElementById('step-current').classList.remove('hidden');
        tg.MainButton.hide();
        // –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞ —Ü–µ–ª–∏
        order.targetRankId = null; 
    }

</script>
</body>
</html>
