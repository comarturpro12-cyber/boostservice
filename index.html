<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Xenon Boost</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@600;800&family=Inter:wght@500;700&display=swap');
        
        :root { 
            --bg: #09090b; 
            --card-bg: #121214;
            --bronze: #cd7f32;
            --silver: #e2e8f0;
            --gold: #fbbf24;
            --phoenix: #a855f7;
            --ranger: #ef4444;
            --champion: #3b82f6;
            --master: #10b981;
            --legend: #ec4899;
        }

        body { 
            background-color: var(--bg); 
            color: #fff; 
            font-family: 'Inter', sans-serif; 
            margin: 0; padding: 0; 
            -webkit-font-smoothing: antialiased;
            background-image: radial-gradient(circle at top center, #1e1b4b 0%, #000 60%);
            background-attachment: fixed;
            min-height: 100vh;
        }

        .container { padding: 15px; padding-bottom: 100px; }

        /* HEADER */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(255,255,255,0.05); backdrop-filter: blur(10px);
            padding: 10px 15px; border-radius: 14px; border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 25px;
        }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .avatar { 
            width: 38px; height: 38px; border-radius: 10px; 
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            display: flex; align-items: center; justify-content: center;
            font-weight: 800; font-family: 'Rajdhani', sans-serif;
        }
        .user-text div:first-child { font-size: 14px; font-weight: 700; }
        .user-text div:last-child { font-size: 11px; color: #9ca3af; }

        /* TABS */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 12px; }
        .tab { flex: 1; text-align: center; padding: 10px; font-size: 12px; font-weight: 800; color: #666; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .tab.active { background: #222; color: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }

        /* GRID */
        .grid { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 12px; 
        }

        /* CARD DESIGN */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex; flex-direction: column;
        }
        .card:active { transform: scale(0.97); }
        
        /* –°–≤–µ—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–Ω–≥–∞ */
        .tier-bronze { box-shadow: 0 0 0 1px rgba(205, 127, 50, 0.1); }
        .tier-silver { box-shadow: 0 0 0 1px rgba(226, 232, 240, 0.1); }
        .tier-gold { box-shadow: 0 0 0 1px rgba(251, 191, 36, 0.1); }
        .tier-phoenix { box-shadow: 0 0 0 1px rgba(168, 85, 247, 0.2); border-color: rgba(168, 85, 247, 0.3); }
        .tier-ranger { box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.2); border-color: rgba(239, 68, 68, 0.3); }
        .tier-high { box-shadow: 0 0 15px rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4); }

        .card-img-box {
            height: 100px; display: flex; align-items: center; justify-content: center;
            background: radial-gradient(circle at center, rgba(255,255,255,0.03), transparent 70%);
            padding-top: 10px;
        }
        .card-img { width: 70px; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.5)); }
        
        .card-content { padding: 12px; text-align: center; }
        .card-title { 
            font-family: 'Rajdhani', sans-serif; font-weight: 800; font-size: 18px; 
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px;
        }
        .price-tag {
            font-size: 13px; font-weight: 600; color: #9ca3af;
            background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 6px;
            display: inline-block;
        }
        .accent-text { color: #fff; }

        /* VIEW STATES */
        .view { display: none; animation: fadeIn 0.3s ease; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* DETAIL PAGE */
        .detail-hero { text-align: center; margin-bottom: 20px; }
        .detail-img { width: 140px; filter: drop-shadow(0 0 30px rgba(59,130,246,0.2)); }
        .detail-name { font-family: 'Rajdhani', sans-serif; font-size: 32px; font-weight: 800; margin: 10px 0; text-transform: uppercase; }
        
        .option-card {
            background: #18181b; padding: 15px; border-radius: 12px;
            border: 1px solid #27272a; margin-bottom: 10px;
            display: flex; justify-content: space-between; align-items: center;
            transition: 0.2s;
        }
        .option-card.active {
            border-color: #3b82f6; background: rgba(59, 130, 246, 0.1);
        }
        .opt-left div:first-child { font-size: 14px; font-weight: 700; }
        .opt-left div:last-child { font-size: 11px; color: #888; }
        .opt-price { font-family: 'Rajdhani', sans-serif; font-size: 18px; font-weight: 800; color: #3b82f6; }

        /* BUTTONS */
        .main-btn {
            position: fixed; bottom: 20px; left: 15px; right: 15px;
            background: #3b82f6; color: #fff;
            padding: 15px; border-radius: 12px; text-align: center;
            font-weight: 800; font-size: 16px; text-transform: uppercase;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
            display: none; cursor: pointer; z-index: 100;
        }
        .back-nav {
            margin-bottom: 20px; font-size: 14px; color: #888; cursor: pointer;
        }
        
        /* PROFILE */
        .profile-stat {
            background: #18181b; padding: 20px; border-radius: 16px; 
            text-align: center; border: 1px solid #27272a; margin-bottom: 20px;
        }
        .big-num { font-family: 'Rajdhani', sans-serif; font-size: 36px; font-weight: 800; color: #fff; }
        .label { font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 1px; }

    </style>
</head>
<body>

    <div class="container">
        
        <div class="header" id="header-box">
            <div class="user-info">
                <div class="avatar" id="u-avatar">?</div>
                <div class="user-text">
                    <div id="u-name">Loading...</div>
                    <div id="u-id">ID: ...</div>
                </div>
            </div>
            <div style="font-size: 20px;">üî•</div>
        </div>

        <div class="tabs" id="nav-tabs">
            <div class="tab active" onclick="setTab('shop')">–ö–ê–¢–ê–õ–û–ì</div>
            <div class="tab" onclick="setTab('profile')">–ü–†–û–§–ò–õ–¨</div>
        </div>

        <div id="view-shop" class="view active">
            <div class="grid" id="grid"></div>
        </div>

        <div id="view-profile" class="view">
            <div class="profile-stat">
                <div class="big-num" id="stat-buys">0</div>
                <div class="label">–£—Å–ø–µ—à–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</div>
            </div>
            <div class="profile-stat">
                <div class="big-num" style="color:#3b82f6" id="stat-spent">0‚ÇΩ</div>
                <div class="label">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤</div>
            </div>
            <div class="profile-stat" onclick="window.open('https://t.me/audemaRRa')" style="cursor:pointer">
                <div style="font-size:24px; margin-bottom:5px">üë®‚Äçüíª</div>
                <div class="label">–ù–∞–ø–∏—Å–∞—Ç—å –ü–æ–¥–¥–µ—Ä–∂–∫–µ</div>
            </div>
        </div>

        <div id="view-detail" class="view">
            <div class="back-nav" onclick="setTab('shop')">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</div>
            
            <div class="detail-hero">
                <img id="d-img" src="" class="detail-img">
                <div id="d-title" class="detail-name">RANK NAME</div>
                <div style="color:#888; font-size:13px; max-width:80%; margin:0 auto">
                    –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –±—É—Å—Ç –¥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–∞–Ω–≥–∞. –ë—ã—Å—Ç—Ä–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ, –±–µ–∑ —á–∏—Ç–æ–≤ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞.
                </div>
            </div>

            <div style="font-size:12px; font-weight:700; color:#666; margin-bottom:10px; margin-top:30px">–í–´–ë–ï–†–ò–¢–ï –¢–ò–ü –ë–£–°–¢–ê:</div>
            <div id="d-options"></div>
        </div>

    </div>

    <div id="main-btn" class="main-btn">–û–ü–õ–ê–¢–ò–¢–¨ –ó–ê–ö–ê–ó</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // --- CONFIG & DATA ---
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–∞–Ω–≥–æ–≤
    const ranks = [];
    
    // Helper to create ranks
    function addRank(id, name, img, tier, priceLobby, priceLogin) {
        ranks.push({
            id: id,
            name: name,
            img: img,
            tier: tier, // for css color
            plans: [
                { name: '–í –ª–æ–±–±–∏ (–ü–∞—Ç–∏)', desc: '–í—ã –∏–≥—Ä–∞–µ—Ç–µ —Å –Ω–∞–º–∏', price: priceLobby },
                { name: '–í—Ö–æ–¥ (–ü–µ—Ä–µ–¥–∞—á–∞)', desc: '–ú—ã –∏–≥—Ä–∞–µ–º –∑–∞ –≤–∞—Å', price: priceLogin }
            ]
        });
    }

    // 1. Bronze 1-4
    for(let i=1; i<=4; i++) addRank(`bronze_${i}`, `BRONZE ${i}`, `bronze${i}.png`, 'tier-bronze', 60 + (i*10), 40 + (i*10));
    
    // 2. Silver 1-4
    for(let i=1; i<=4; i++) addRank(`silver_${i}`, `SILVER ${i}`, `silver${i}.png`, 'tier-silver', 120 + (i*20), 90 + (i*15));
    
    // 3. Gold 1-4
    for(let i=1; i<=4; i++) addRank(`gold_${i}`, `GOLD ${i}`, `gold${i}.png`, 'tier-gold', 250 + (i*30), 180 + (i*20));

    // 4. High Ranks
    addRank('phoenix', 'PHOENIX', 'phoenix.png', 'tier-phoenix', 500, 350);
    addRank('ranger', 'RANGER', 'ranger.png', 'tier-ranger', 700, 500);
    addRank('champion', 'CHAMPION', 'champion.png', 'tier-high', 1000, 750);
    addRank('master', 'MASTER', 'master.png', 'tier-high', 1500, 1100);
    addRank('elite', 'ELITE', 'elite.png', 'tier-high', 2200, 1600);
    addRank('legend', 'THE LEGEND', 'legend.png', 'tier-high', 3500, 2500);

    let currentItem = null;
    let selectedPlanIdx = -1;

    // --- RENDER ---
    function renderGrid() {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        
        ranks.forEach(rank => {
            const el = document.createElement('div');
            el.className = `card ${rank.tier}`;
            el.onclick = () => openDetail(rank.id);
            
            // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è "–æ—Ç..."
            const minPrice = Math.min(...rank.plans.map(p => p.price));
            
            el.innerHTML = `
                <div class="card-img-box">
                    <img src="${rank.img}" class="card-img" onerror="this.src='bronze1.png'">
                </div>
                <div class="card-content">
                    <div class="card-title" style="color: ${getColor(rank.tier)}">${rank.name}</div>
                    <div class="price-tag">–æ—Ç <span class="accent-text">${minPrice}‚ÇΩ</span></div>
                </div>
            `;
            grid.appendChild(el);
        });
    }

    function getColor(tier) {
        if(tier.includes('bronze')) return '#cd7f32';
        if(tier.includes('silver')) return '#fff';
        if(tier.includes('gold')) return '#fbbf24';
        if(tier.includes('phoenix')) return '#a855f7';
        if(tier.includes('ranger')) return '#ef4444';
        return '#3b82f6';
    }

    function openDetail(id) {
        currentItem = ranks.find(r => r.id === id);
        selectedPlanIdx = -1;
        updateMainButton();

        document.getElementById('d-img').src = currentItem.img;
        document.getElementById('d-title').innerText = currentItem.name;
        document.getElementById('d-title').style.color = getColor(currentItem.tier);
        
        const optContainer = document.getElementById('d-options');
        optContainer.innerHTML = '';
        
        currentItem.plans.forEach((plan, idx) => {
            const div = document.createElement('div');
            div.className = 'option-card';
            div.onclick = () => selectPlan(idx);
            div.id = `plan-${idx}`;
            div.innerHTML = `
                <div class="opt-left">
                    <div>${plan.name}</div>
                    <div>${plan.desc}</div>
                </div>
                <div class="opt-price">${plan.price}‚ÇΩ</div>
            `;
            optContainer.appendChild(div);
        });

        switchView('detail');
    }

    function selectPlan(idx) {
        if(tg.HapticFeedback) tg.HapticFeedback.selectionChanged();
        
        // UI update
        document.querySelectorAll('.option-card').forEach(el => el.classList.remove('active'));
        document.getElementById(`plan-${idx}`).classList.add('active');
        
        selectedPlanIdx = idx;
        updateMainButton();
    }

    function updateMainButton() {
        const btn = document.getElementById('main-btn');
        if (selectedPlanIdx !== -1 && currentItem) {
            const price = currentItem.plans[selectedPlanIdx].price;
            btn.innerText = `–ö–£–ü–ò–¢–¨ –ó–ê ${price}‚ÇΩ`;
            btn.style.display = 'block';
            btn.onclick = () => {
                const payload = {
                    name: `Boost: ${currentItem.name} (${currentItem.plans[selectedPlanIdx].name})`,
                    price: price
                };
                tg.sendData(JSON.stringify(payload));
            };
        } else {
            btn.style.display = 'none';
        }
    }

    // --- NAVIGATION ---
    function setTab(tab) {
        if(tg.HapticFeedback) tg.HapticFeedback.selectionChanged();
        
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        // Find tab element manually based on text or index logic if needed, 
        // strictly simple here:
        if(tab === 'shop') document.querySelectorAll('.tab')[0].classList.add('active');
        if(tab === 'profile') document.querySelectorAll('.tab')[1].classList.add('active');

        if(tab === 'shop') switchView('shop');
        if(tab === 'profile') switchView('profile');
    }

    function switchView(viewName) {
        document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
        document.getElementById(`view-${viewName}`).classList.add('active');
        
        const header = document.getElementById('header-box');
        const nav = document.getElementById('nav-tabs');
        
        if (viewName === 'detail') {
            header.style.display = 'none';
            nav.style.display = 'none';
        } else {
            header.style.display = 'flex';
            nav.style.display = 'flex';
            document.getElementById('main-btn').style.display = 'none';
        }
        window.scrollTo({top:0, behavior:'smooth'});
    }

    // --- INIT ---
    function init() {
        const urlParams = new URLSearchParams(window.location.search);
        const name = urlParams.get('name') || (tg.initDataUnsafe.user ? tg.initDataUnsafe.user.first_name : 'Guest');
        const uid = urlParams.get('uid') || (tg.initDataUnsafe.user ? tg.initDataUnsafe.user.id : '000000');
        const buys = urlParams.get('buys') || '0';
        const spent = urlParams.get('spent') || '0';

        document.getElementById('u-name').innerText = name;
        document.getElementById('u-id').innerText = `ID: ${uid}`;
        document.getElementById('u-avatar').innerText = name[0].toUpperCase();

        document.getElementById('stat-buys').innerText = buys;
        document.getElementById('stat-spent').innerText = `${spent}‚ÇΩ`;

        renderGrid();
    }

    init();

</script>
</body>
</html>
